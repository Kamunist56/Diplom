unit cSocStatus;

interface
uses cSmallTables, fDM;
Type
 TSoc_status= class
  public
  id:integer;
  name:String;
  group_inval:TSmall_tables;

  procedure Get(Find_id:integer);
  procedure New(Soc_status:TSoc_status);
 end;
implementation

{ TSoc_status }

procedure TSoc_status.Get(Find_id: integer);
begin
  with dm.QsocStatus do
  begin
    close;
    sql.add('select name, group_inval from Soc_status where id=:id');
    parameters.ParamValues['id']:=Find_id;
    open;
  end;
  id:=Find_id;
  name:=dm.QSocStatus.FieldByName('name').AsString;
  group_inval:=TSmall_tables.Create;
  group_inval.GetAtr(dm.QSocStatus.FieldByName('group_inval').AsInteger,'Soc_Status');
end;

procedure TSoc_status.New(Soc_status: TSoc_status);
begin
    with dm.QsocStatus do
  begin
    close;
    sql.add('insert Soc_status(name, group_inval) values(name, group_inval)');
    parameters.ParamValues['name']:=Soc_status.name;
    parameters.ParamValues['group_inval']:=Soc_status.group_inval.id;
    ExecSQl;
  end;
end;

end.
